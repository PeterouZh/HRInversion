root_obs: &root_obs s3://bucket-7001/xxxx
modelarts_download: &modelarts_download
  data_root:
    datapath_obs: '{global_cfg.root_obs}/keras/mixed_faces/mixed_faces1024_v3.zip'
    datapath: datasets/mixed_faces/mixed_faces1024_v3.zip
    overwrite: false
    eval: true
    unzip: false
  inception:
    datapath_obs: '{global_cfg.root_obs}/keras/stylegan2-ada-pytorch-exp/datasets/pretrained/metrics/inception-2015-12-05.pt'
    datapath: datasets/pretrained/metrics/inception-2015-12-05.pt
    overwrite: false
    eval: true
    unzip: false
  ffhq1024:
    datapath_obs: '{global_cfg.root_obs}/keras/stylegan2-ada-pytorch-exp/datasets/pretrained/transfer-learning-source-nets/ffhq-res1024-mirror-stylegan2-noaug.pkl'
    datapath: datasets/pretrained/transfer-learning-source-nets/ffhq-res1024-mirror-stylegan2-noaug.pkl
    overwrite: false
    eval: true
    unzip: false

network_pkl: &network_pkl
  FFHQ_r1024: "datasets/pretrained/transfer-learning-source-nets/ffhq-res1024-mirror-stylegan2-noaug.pkl"
  photo2cartoon_r1024: "datasets/pretrained/finetune_photo2cartoon_r1024-20211030_164844_712/ckptdir/best_fid/G_D_G_ema.pkl"
  disney_cartoon: "datasets/pretrained/finetune_disney_cartoon_r1024-20211030_174608_646/ckptdir/best_fid/G_D_G_ema.pkl"
  ukiyo_e: "datasets/pretrained/finetune_ukiyo_e_r1024-20211030_204814_776/ckptdir/best_fid/G_D_G_ema.pkl"
#  Danbooru2019: "datasets/pretrained/finetune_Danbooru2019_Portraits_r5_r1024-20211031_143226_003/ckptdir/best_fid/G_D_G_ema.pkl"
  Danbooru2019: "datasets/pretrained/finetune_Danbooru2019_Portraits_r5_r1024-20211104_145023_025/ckptdir/best_fid/G_D_G_ema.pkl"

loss_cfg: &loss_cfg
  vgg16_conv_r1024_loss_cfg:
    register_modules:
    - exp2.hrinversion.models.vgg_per_loss
    name: exp2.hrinversion.models.vgg_per_loss.VGG16ConvLoss
    model_name: vgg16_conv
    downsample_size: -1
    use_stat_loss: false
    layers:
    - features_2
    - features_7
    - features_14
    - features_21
    - features_28
    loss_w_dict:
      features_2: 0.0002
      features_7: 0.0001
      features_14: 0.0001
      features_21: 0.0002
      features_28: 0.0005
  vgg16_jit:
    name: vgg16_jit
    vgg16_url: "datasets/pretrained/metrics/vgg16.pt"
    resize_input: true
    mse_weight: 1.0
  disc_loss_cfg:
    register_modules:
    - exp.ada_ultra.models.networks_ultra
    name: exp.ada_ultra.models.networks_ultra.DiscriminatorLoss
    use_disc_loss: true
    use_stat_loss: false
    selected_loss_w_dict: 0
    layers:
    - b1024
    - b512
    - b256
    - b128
    - b64
    - b32
    - b16
    - b8
    loss_w_dict_table:
      zero:
        b1024: 0.0
        b512: 0.0
        b256: 0.0
        b128: 0.0
        b64: 0.0
        b32: 0.0
        b16: 0.0
        b8: 0.0
      ffhq:
        b1024: 0.01
        b512: 0.015
        b256: 0.015
        b128: 0.015
        b64: 0.01
        b32: 0.008
        b16: 0.008
        b8: 0.0
      anime:
        b1024: 0.0
        b512: 0.0
        b256: 0.0
        b128: 0.005
        b64: 0.005
        b32: 0.005
        b16: 0.005
        b8: 0.0
      stat_cartoon:
        b1024: 10.0
        b512: 0.0
        b256: 10.0
        b128: 1.0
        b64: 0.0
        b32: 0.0
        b16: 0.005
        b8: 0.001
      FFHQ_Danbooru_c:
        b1024: 0.007
        b512: 0.008
        b256: 0.008
        b128: 0.007
        b64: 0.006
        b32: 0.004
        b16: 0.003
        b8: 0.005
      FFHQ_Danbooru_s:
        b1024: 4.0
        b512: 4.0
        b256: 2.0
        b128: 0.0
        b64: 0.0
        b32: 0.0
        b16: 0.0
        b8: 0.0
      real_face:
        b1024: 0.005
        b512: 0.005
        b256: 0.005
        b128: 0.005
        b64: 0.005
        b32: 0.004
        b16: 0.004
        b8: 0.004
      MetFaces:
        b1024: 0.005
        b512: 0.005
        b256: 0.005
        b128: 0.005
        b64: 0.005
        b32: 0.004
        b16: 0.004
        b8: 0.004
      cartoon_face:
        b1024: 0.005
        b512: 0.005
        b256: 0.005
        b128: 0.005
        b64: 0.003
        b32: 0.003
        b16: 0.003
        b8: 0.003
      Danbooru_anime_face:
        b1024: 0.003
        b512: 0.003
        b256: 0.003
        b128: 0.004
        b64: 0.003
        b32: 0.003
        b16: 0.003
        b8: 0.003
      real_face_style:
        b1024: 20.0
        b512: 20.0
        b256: 10.0
        b128: 5.0
        b64: 0.8
        b32: 0.08
        b16: 0.005
        b8: 0.002
      MetFaces_style:
        b1024: 20.0
        b512: 20.0
        b256: 10.0
        b128: 5.0
        b64: 0.8
        b32: 0.08
        b16: 0.006
        b8: 0.002
      cartoon_face_style:
        b1024: 20.0
        b512: 20.0
        b256: 10.0
        b128: 3.0
        b64: 0.7
        b32: 0.07
        b16: 0.006
        b8: 0.002
      Danbooru_anime_face_style:
        b1024: 10.0
        b512: 10.0
        b256: 5.0
        b128: 1.5
        b64: 0.4
        b32: 0.04
        b16: 0.004
        b8: 0.0008
    loss_w_dict:
      b1024: 0.01
      b512: 0.015
      b256: 0.015
      b128: 0.015
      b64: 0.01
      b32: 0.008
      b16: 0.008
      b8: 0.0
    loss_w_dict_style:
      b1024: 0.0
      b512: 0.0
      b256: 0.0
      b128: 0.005
      b64: 0.005
      b32: 0.005
      b16: 0.005
      b8: 0.0
  resnet50_loss_cfg:
    register_modules:
    - exp.ada_ultra.models.networks_ultra
    name: exp.ada_ultra.models.networks_ultra.ResNet50Loss
    model_name: resnet50_conv
    model_name_list:
    - resnet50_conv
    - dino_resnet50_conv
    - random_resnet50_conv
    - resnet50_relu
    resize_input: true
    use_stat_loss: false
    selected_loss_w_dict: 0
    layers:
    - conv1
    - layer1.2.conv1
    - layer2.3.conv1
    - layer3.5.conv1
    - layer4.2.conv1
    loss_w_dict_table:
      zero:
        conv1: 0.0
        layer1.2.conv1: 0.0
        layer2.3.conv1: 0.0
        layer3.5.conv1: 0.0
        layer4.2.conv1: 0.0
      real_face_resnet50_conv_SL_256:
        conv1: 0.003
        layer1.2.conv1: 0.008
        layer2.3.conv1: 0.01
        layer3.5.conv1: 0.03
        layer4.2.conv1: 0.02
      real_face_resnet50_conv_SL_1024:
        conv1: 0.001
        layer1.2.conv1: 0.003
        layer2.3.conv1: 0.004
        layer3.5.conv1: 0.008
        layer4.2.conv1: 0.008
      real_face_dino_resnet50_conv_SSL_256:
        conv1: 0.0006
        layer1.2.conv1: 0.002
        layer2.3.conv1: 0.002
        layer3.5.conv1: 0.004
        layer4.2.conv1: 0.01
      real_face_dino_resnet50_conv_SSL_1024:
        conv1: 0.0002
        layer1.2.conv1: 0.0005
        layer2.3.conv1: 0.0005
        layer3.5.conv1: 0.001
        layer4.2.conv1: 0.002
      real_face_random_resnet50_conv_R_256:
        conv1: 0.02
        layer1.2.conv1: 0.04
        layer2.3.conv1: 0.1
        layer3.5.conv1: 0.1
        layer4.2.conv1: 0.3
      real_face_random_resnet50_conv_R_1024:
        conv1: 0.004
        layer1.2.conv1: 0.01
        layer2.3.conv1: 0.02
        layer3.5.conv1: 0.04
        layer4.2.conv1: 0.08
      real_face_resnet50_relu:
        conv1: 0.004
        layer1: 0.002
        layer2: 0.003
        layer3: 0.005
        layer4: 0.0
    loss_w_dict:
      conv1: 0.0
      layer1.2.conv1: 0.0
      layer2.3.conv1: 0.0
      layer3.5.conv1: 0.0
      layer4.2.conv1: 0.0
  DeitSP16_loss_cfg:
    register_modules:
    - exp.ada_ultra.models.networks_ultra
    name: exp.ada_ultra.models.networks_ultra.DeitSmallPatch16Loss
    model_name: vit_deit_small_patch16_224
    model_name_list:
    - vit_deit_small_patch16_224
    - vit_deit_small_distilled_patch16_224
    - dino_deitsmall16
    resize_input: true
    use_stat_loss: false
    selected_loss_w_dict: 0
    layers:
    - patch_embed
    - blocks.0
    - blocks.3
    - blocks.7
    - blocks.11
    loss_w_dict_table:
      zero:
        patch_embed: 0.0
        blocks.0: 0.0
        blocks.3: 0.0
        blocks.7: 0.0
        blocks.11: 0.0
      real_face_deitSP16_SL:
        patch_embed: 0.02
        blocks.0: 0.02
        blocks.3: 0.02
        blocks.7: 0.005
        blocks.11: 0.005
      real_face_deitSP16_distil:
        patch_embed: 0.02
        blocks.0: 0.02
        blocks.3: 0.02
        blocks.7: 0.005
        blocks.11: 0.005
      real_face_deitSP16_dino_SSL:
        patch_embed: 0.1
        blocks.0: 0.1
        blocks.3: 0.1
        blocks.7: 0.1
        blocks.11: 0.08
    loss_w_dict:
      patch_embed: 0.0
      blocks.0: 0.0
      blocks.3: 0.0
      blocks.7: 0.0
      blocks.11: 0.0
  ssl_resnext101_loss_cfg:
    register_modules:
    - exp.ada_ultra.models.networks_ultra
    name: exp.ada_ultra.models.networks_ultra.SSLResNext101Loss
    use_stat_loss: false
    selected_loss_w_dict: 0
    layers:
    - conv1
    - layer1
    - layer2
    - layer3
    - layer4
    - global_pool
    loss_w_dict_table:
      zero:
        conv1: 0.0
        layer1: 0.0
        layer2: 0.0
        layer3: 0.0
        layer4: 0.0
        global_pool: 0.0
      real_face:
        conv1: 0.0
        layer1: 0.0
        layer2: 0.0
        layer3: 0.0
        layer4: 0.0
        global_pool: 0.0
    loss_w_dict:
      conv1: 0.0
      layer1: 0.0
      layer2: 0.0
      layer3: 0.0
      layer4: 0.0
      global_pool: 0.0
  hrnet_w64_loss_cfg:
    register_modules:
    - exp.ada_ultra.models.networks_ultra
    name: exp.ada_ultra.models.networks_ultra.HRNetW64Loss
    use_stat_loss: false
    selected_loss_w_dict: 0
    layers:
    - act1
    - act2
    - layer1
    - stage2
    - stage3
    - stage4
    - final_layer
    loss_w_dict_table:
      zero:
        act1: 0.0
        act2: 0.0
        layer1: 0.0
        stage2: 0.0
        stage3: 0.0
        stage4: 0.0
        final_layer: 0.0
      real_face:
        act1: 0.0
        act2: 0.0
        layer1: 0.0
        stage2: 0.0
        stage3: 0.0
        stage4: 0.0
        final_layer: 0.0
    loss_w_dict:
      act1: 0.0
      act2: 0.0
      layer1: 0.0
      stage2: 0.0
      stage3: 0.0
      stage4: 0.0
      final_layer: 0.0
  swin22k_loss_cfg:
    register_modules:
    - exp.ada_ultra.models.networks_ultra
    name: exp.ada_ultra.models.networks_ultra.Swin22kLoss
    use_stat_loss: false
    selected_loss_w_dict: 0
    layers:
    - patch_embed
    - layers.0
    - layers.1
    - layers.2
    - layers.3
    - avgpool
    loss_w_dict_table:
      zero:
        patch_embed: 0.0
        layers.0: 0.0
        layers.1: 0.0
        layers.2: 0.0
        layers.3: 0.0
        avgpool: 0.0
      real_face:
        patch_embed: 0.01
        layers.0: 0.005
        layers.1: 0.005
        layers.2: 0.003
        layers.3: 0.001
        avgpool: null
    loss_w_dict:
      patch_embed: 0.01
      layers.0: 0.005
      layers.1: 0.005
      layers.2: 0.003
      layers.3: 0.001
      avgpool: null


G_cfg_r1024: &G_cfg_r1024
  register_modules:
    - "exp2.hrinversion.models.style_inr_gan"
  name: "exp2.hrinversion.models.style_inr_gan.GeneratorUltraZPC"
  z_dim: 512
  c_dim: 0
  w_dim: 512
  img_resolution: 1024
  img_channels: 3
  mapping_kwargs:
    num_layers: 8
  synthesis_kwargs:
    channel_base: 32768
    channel_max: 512
    num_fp16_res: 4
    conv_clamp: 256
  shape: [1024, 1024]
  tanh: false
  return_ori_out: False
  inr_net_kwargs:
    disable: false
    in_dim: 34
    out_dim: 3
    max_points_every: 1048576
    hidden_list:
      - 32
      - 32


finetune_photo2cartoon_r1024:
  data: "datasets/Faces/photo2cartoon/photo2cartoon_ada.zip"
  cfg: "paper1024"
  resume: "ffhq1024"
  snap: 10
  mirror: 1
  aug_p: 0.5
  fix_G_ema_mapping: true
  detector_url: "datasets/pretrained/metrics/inception-2015-12-05.pt"
  resume_pkl: "datasets/pretrained/transfer-learning-source-nets/\
        ffhq-res1024-mirror-stylegan2-noaug.pkl"
  G_cfg:
    base: G_cfg_r1024
    register_modules:
      - "exp2.hrinversion.models.style_inr_gan"
    name: "exp2.hrinversion.models.style_inr_gan.GeneratorUltraZPC_FreezeMapping"
    inr_net_kwargs:
      disable: true
  loss_cfg:
    register_modules:
      - exp2.hrinversion.models.style_inr_gan_loss
    name: exp2.hrinversion.models.style_inr_gan_loss.Style_INR_GAN_MS_Loss
    min_size: 256
    max_size: 1024
    resolution: 1024
    resize_p: 0.
    random_seed: 0
  root_obs: *root_obs
  modelarts_download: *modelarts_download


finetune_disney_cartoon_r1024:
  data: "datasets/Faces/disney_cartoon/disney_cartoon_ada.zip"
  cfg: "paper1024"
  resume: "ffhq1024"
  snap: 10
  mirror: 1
  aug_p: 0.5
  fix_G_ema_mapping: true
  detector_url: "datasets/pretrained/metrics/inception-2015-12-05.pt"
  resume_pkl: "datasets/pretrained/transfer-learning-source-nets/\
        ffhq-res1024-mirror-stylegan2-noaug.pkl"
  G_cfg:
    base: G_cfg_r1024
    register_modules:
      - "exp2.hrinversion.models.style_inr_gan"
    name: "exp2.hrinversion.models.style_inr_gan.GeneratorUltraZPC_FreezeMapping"
    inr_net_kwargs:
      disable: true
  loss_cfg:
    register_modules:
      - exp2.hrinversion.models.style_inr_gan_loss
    name: exp2.hrinversion.models.style_inr_gan_loss.Style_INR_GAN_MS_Loss
    min_size: 256
    max_size: 1024
    resolution: 1024
    resize_p: 0.
    random_seed: 0
  root_obs: *root_obs
  modelarts_download: *modelarts_download


finetune_ukiyo_e_r1024:
  data: "datasets/Faces/ukiyo_e/ukiyoe-1024_ada.zip"
  cfg: "paper1024"
  resume: "ffhq1024"
  snap: 10
  mirror: 1
  aug_p: 0.5
  fix_G_ema_mapping: true
  detector_url: "datasets/pretrained/metrics/inception-2015-12-05.pt"
  resume_pkl: "datasets/pretrained/transfer-learning-source-nets/\
        ffhq-res1024-mirror-stylegan2-noaug.pkl"
  G_cfg:
    base: G_cfg_r1024
    register_modules:
      - "exp2.hrinversion.models.style_inr_gan"
    name: "exp2.hrinversion.models.style_inr_gan.GeneratorUltraZPC_FreezeMapping"
    synthesis_kwargs:
#      freeze_blocks: [4, 8, 16, 32, 64, 128, 256]
#      freeze_blocks: [4, 8]
      freeze_blocks: []
    inr_net_kwargs:
      disable: true
  loss_cfg:
    register_modules:
      - exp2.hrinversion.models.style_inr_gan_loss
    name: exp2.hrinversion.models.style_inr_gan_loss.Style_INR_GAN_MS_Loss
    min_size: 256
    max_size: 1024
    resolution: 1024
    resize_p: 0.
    random_seed: 0
  root_obs: *root_obs
  modelarts_download: *modelarts_download


finetune_cartoonset10k_r1024:
  data: "datasets/Faces/cartoonset10k/cartoonset10k_ada.zip"
  cfg: "paper1024"
  resume: "ffhq1024"
  snap: 10
  mirror: 1
  aug_p: 0.5
  fix_G_ema_mapping: true
  detector_url: "datasets/pretrained/metrics/inception-2015-12-05.pt"
  resume_pkl: "datasets/pretrained/transfer-learning-source-nets/\
        ffhq-res1024-mirror-stylegan2-noaug.pkl"
  G_cfg:
    base: G_cfg_r1024
    register_modules:
      - "exp2.hrinversion.models.style_inr_gan"
    name: "exp2.hrinversion.models.style_inr_gan.GeneratorUltraZPC_FreezeMapping"
    synthesis_kwargs:
      freeze_blocks: [4, 8, 16, 32, 64]
    inr_net_kwargs:
      disable: true
  loss_cfg:
    register_modules:
      - exp2.hrinversion.models.style_inr_gan_loss
    name: exp2.hrinversion.models.style_inr_gan_loss.Style_INR_GAN_MS_Loss
    min_size: 256
    max_size: 1024
    resolution: 1024
    resize_p: 0.
    random_seed: 0
  root_obs: *root_obs
  modelarts_download: *modelarts_download


finetune_Danbooru2019_Portraits_r5_r1024:
  data: "datasets/Danbooru2019_Portraits/Danbooru2019_Portraits_r5_ada.zip"
  cfg: "paper1024"
  resume: "ffhq1024"
  snap: 10
  mirror: 1
  aug_p: 0.5
  fix_G_ema_mapping: true
  detector_url: "datasets/pretrained/metrics/inception-2015-12-05.pt"
  resume_pkl: "datasets/pretrained/transfer-learning-source-nets/\
        ffhq-res1024-mirror-stylegan2-noaug.pkl"
  G_cfg:
    base: G_cfg_r1024
    register_modules:
      - "exp2.hrinversion.models.style_inr_gan"
    name: "exp2.hrinversion.models.style_inr_gan.GeneratorUltraZPC_FreezeMapping"
    synthesis_kwargs:
#      freeze_blocks: [4, 8, 16]
#      freeze_blocks: [4, 8]
      freeze_blocks: []
    inr_net_kwargs:
      disable: true
  loss_cfg:
    register_modules:
      - exp2.hrinversion.models.style_inr_gan_loss
    name: exp2.hrinversion.models.style_inr_gan_loss.Style_INR_GAN_MS_Loss
    min_size: 256
    max_size: 1024
    resolution: 1024
    resize_p: 0.
    random_seed: 0
  root_obs: *root_obs
  modelarts_download: *modelarts_download


align_face_web:
  port: 8561
  sidebar:
    sidebar_name: "align_face"
  model_cfg:
    register_modules:
      - tl2_lib.tl2.proj.dlib.ffhq_face_align.align_face_stmodel
    name: tl2_lib.tl2.proj.dlib.ffhq_face_align.align_face_stmodel.AlignFace
  mode:
    - align_face
  align_face:
    landmark_model: "datasets/pretrained/shape_predictor_68_face_landmarks.dat"
    image_list:
      raw_img_list:
        image_list_file:
          - "datasets2/raw_faces/image_list.txt"


projector_web_deprecated:
  port: 8561
  start_web: false
  sidebar:
    sidebar_name: projector_web
  image_list:
    image_list_file:
    - ''
    columns:
    - path
    default_index: 0
  model_cfg:
    register_modules:
    - exp.web.models.style_ultra_gan_model
    name: exp.web.models.style_ultra_gan_model.StyleUltraGANWeb
  mode:
  - projector_web
  - align_images_web
  - sampling_images_web
  sampling_images_web:
    network_pkl:
    - datasets/pretrained/StyleUltraGAN1024_ada_ms_20210421_161953_390/network-snapshot-001600.pkl
    - datasets/pretrained/StyleUltraGAN1024_ada_20210421_221608_719/network-snapshot-024640.pkl
    - datasets/pretrained/StyleUltraGAN1024_ada_ms_20210421_161953_390/network-snapshot-012080.pkl
    - datasets/pretrained/StyleUltraGAN1024_ada_20210421_221608_719/network-snapshot-003440.pkl
    - datasets/pretrained/StyleUltraGAN1024_ada_ms_20210415_191746_421/network-snapshot-010640.pkl
    - datasets/pretrained/StyleUltraGAN1024_ada_ms_20210415_191746_421/network-snapshot-007840.pkl
    - results/train_StyleUltraGAN_ADA_Transfer_MixedFaces/train_transfer_MixedFaces1024_ms-20210412_173155_223/exp/00000-mixed_faces1024-cond-mirror-paper1024-resumeffhq1024/network-snapshot-004640.pkl
    seed:
    - 85
    - 265
    - 297
    - 849
    fps: 10
    grid_size:
    - 3
    - 3
    class_id: 0
    base_shape:
    - 256
    - 256
    shape:
    - 1024
    - 1024
    start_ratio: 1
    max_ratio: 8
    mid_ratio: 6
    steps:
    - 0.2
    - 0.05
  align_images_web:
    landmark_model: datasets/pretrained/shape_predictor_68_face_landmarks.dat
    image_list:
      raw_img_list:
        image_list_file:
        - datasets/raw_face/face_raw_list.txt
  projector_web:
    image_list:
      real_face_list:
        image_list_file:
        - datasets/domain_face/real_face_list.txt
        label: 0
      MetFaces_list:
        image_list_file:
        - datasets/domain_face/MetFaces_list.txt
        label: 1
      Danbooru_anime_face:
        image_list_file:
        - datasets/domain_face/Danbooru_anime_face.txt
        label: 3
    network_pkl:
    - datasets/pretrained/StyleUltraGAN1024_ada_ms_20210421_161953_390/network-snapshot-001600.pkl
    - datasets/pretrained/StyleUltraGAN1024_ada_20210421_221608_719/network-snapshot-024640.pkl
    - datasets/pretrained/StyleUltraGAN1024_ada_ms_20210421_161953_390/network-snapshot-012080.pkl
    - datasets/pretrained/StyleUltraGAN1024_ada_20210421_221608_719/network-snapshot-003440.pkl
    - datasets/pretrained/StyleUltraGAN1024_ada_ms_20210415_191746_421/network-snapshot-010640.pkl
    - datasets/pretrained/StyleUltraGAN1024_ada_ms_20210415_191746_421/network-snapshot-007840.pkl
    - results/train_StyleUltraGAN_ADA_Transfer_MixedFaces/train_transfer_MixedFaces1024_ms-20210412_173155_223/exp/00000-mixed_faces1024-cond-mirror-paper1024-resumeffhq1024/network-snapshot-004640.pkl
    fps: 20
    seed: 303
    num_steps: 1000
    optim_noise_bufs: false
    regularize_noise_weight: 0.0
    initial_learning_rate: 0.1
    proj_w_plus: true
    loss_cfg:
      vgg16conv_loss_cfg:
        register_modules:
        - exp.ada_ultra.models.networks_ultra
        name: exp.ada_ultra.models.networks_ultra.VGG16ConvLoss
        model_name: vgg16_conv
        model_name_list:
        - vgg16_conv
        - vgg16_relu
        - vgg16_conv_random
        resize_input: true
        use_stat_loss: false
        selected_loss_w_dict: 0
        layers:
        - features_2
        - features_7
        - features_14
        - features_21
        - features_28
        loss_w_dict_table:
          zero:
            features_2: 0.0
            features_7: 0.0
            features_14: 0.0
            features_21: 0.0
            features_28: 0.0
          real_face_vgg_relu_256:
            features_2: 0.001
            features_7: 0.001
            features_14: 0.001
            features_21: 0.002
            features_28: 0.01
          real_face_vgg_relu_1024:
            features_2: 0.0006
            features_7: 0.0004
            features_14: 0.0004
            features_21: 0.0007
            features_28: 0.007
          real_face_vgg_conv_256:
            features_2: 0.001
            features_7: 0.0006
            features_14: 0.0005
            features_21: 0.0005
            features_28: 0.001
          real_face_vgg_conv_1024:
            features_2: 0.0002
            features_7: 0.0001
            features_14: 0.0001
            features_21: 0.0002
            features_28: 0.0005
          real_face_vgg_conv_random_256:
            features_2: 0.01
            features_7: 0.01
            features_14: 0.04
            features_21: 0.05
            features_28: 0.1
          real_face_vgg_conv_random_1024:
            features_2: 0.002
            features_7: 0.003
            features_14: 0.005
            features_21: 0.008
            features_28: 0.02
        loss_w_dict:
          features_2: 0.0
          features_7: 0.0
          features_14: 0.0
          features_21: 0.0
          features_28: 0.0
      disc_loss_cfg:
        register_modules:
        - exp.ada_ultra.models.networks_ultra
        name: exp.ada_ultra.models.networks_ultra.DiscriminatorLoss
        use_disc_loss: true
        use_stat_loss: false
        selected_loss_w_dict: 0
        layers:
        - b1024
        - b512
        - b256
        - b128
        - b64
        - b32
        - b16
        - b8
        loss_w_dict_table:
          zero:
            b1024: 0.0
            b512: 0.0
            b256: 0.0
            b128: 0.0
            b64: 0.0
            b32: 0.0
            b16: 0.0
            b8: 0.0
          ffhq:
            b1024: 0.01
            b512: 0.015
            b256: 0.015
            b128: 0.015
            b64: 0.01
            b32: 0.008
            b16: 0.008
            b8: 0.0
          anime:
            b1024: 0.0
            b512: 0.0
            b256: 0.0
            b128: 0.005
            b64: 0.005
            b32: 0.005
            b16: 0.005
            b8: 0.0
          stat_cartoon:
            b1024: 10.0
            b512: 0.0
            b256: 10.0
            b128: 1.0
            b64: 0.0
            b32: 0.0
            b16: 0.005
            b8: 0.001
          FFHQ_Danbooru_c:
            b1024: 0.007
            b512: 0.008
            b256: 0.008
            b128: 0.007
            b64: 0.006
            b32: 0.004
            b16: 0.003
            b8: 0.005
          FFHQ_Danbooru_s:
            b1024: 4.0
            b512: 4.0
            b256: 2.0
            b128: 0.0
            b64: 0.0
            b32: 0.0
            b16: 0.0
            b8: 0.0
          real_face:
            b1024: 0.005
            b512: 0.005
            b256: 0.005
            b128: 0.005
            b64: 0.005
            b32: 0.004
            b16: 0.004
            b8: 0.004
          MetFaces:
            b1024: 0.005
            b512: 0.005
            b256: 0.005
            b128: 0.005
            b64: 0.005
            b32: 0.004
            b16: 0.004
            b8: 0.004
          cartoon_face:
            b1024: 0.005
            b512: 0.005
            b256: 0.005
            b128: 0.005
            b64: 0.003
            b32: 0.003
            b16: 0.003
            b8: 0.003
          Danbooru_anime_face:
            b1024: 0.003
            b512: 0.003
            b256: 0.003
            b128: 0.004
            b64: 0.003
            b32: 0.003
            b16: 0.003
            b8: 0.003
          real_face_style:
            b1024: 20.0
            b512: 20.0
            b256: 10.0
            b128: 5.0
            b64: 0.8
            b32: 0.08
            b16: 0.005
            b8: 0.002
          MetFaces_style:
            b1024: 20.0
            b512: 20.0
            b256: 10.0
            b128: 5.0
            b64: 0.8
            b32: 0.08
            b16: 0.006
            b8: 0.002
          cartoon_face_style:
            b1024: 20.0
            b512: 20.0
            b256: 10.0
            b128: 3.0
            b64: 0.7
            b32: 0.07
            b16: 0.006
            b8: 0.002
          Danbooru_anime_face_style:
            b1024: 10.0
            b512: 10.0
            b256: 5.0
            b128: 1.5
            b64: 0.4
            b32: 0.04
            b16: 0.004
            b8: 0.0008
        loss_w_dict:
          b1024: 0.01
          b512: 0.015
          b256: 0.015
          b128: 0.015
          b64: 0.01
          b32: 0.008
          b16: 0.008
          b8: 0.0
        loss_w_dict_style:
          b1024: 0.0
          b512: 0.0
          b256: 0.0
          b128: 0.005
          b64: 0.005
          b32: 0.005
          b16: 0.005
          b8: 0.0
      resnet50_loss_cfg:
        register_modules:
        - exp.ada_ultra.models.networks_ultra
        name: exp.ada_ultra.models.networks_ultra.ResNet50Loss
        model_name: resnet50_conv
        model_name_list:
        - resnet50_conv
        - dino_resnet50_conv
        - random_resnet50_conv
        - resnet50_relu
        resize_input: true
        use_stat_loss: false
        selected_loss_w_dict: 0
        layers:
        - conv1
        - layer1.2.conv1
        - layer2.3.conv1
        - layer3.5.conv1
        - layer4.2.conv1
        loss_w_dict_table:
          zero:
            conv1: 0.0
            layer1.2.conv1: 0.0
            layer2.3.conv1: 0.0
            layer3.5.conv1: 0.0
            layer4.2.conv1: 0.0
          real_face_resnet50_conv_SL_256:
            conv1: 0.003
            layer1.2.conv1: 0.008
            layer2.3.conv1: 0.01
            layer3.5.conv1: 0.03
            layer4.2.conv1: 0.02
          real_face_resnet50_conv_SL_1024:
            conv1: 0.001
            layer1.2.conv1: 0.003
            layer2.3.conv1: 0.004
            layer3.5.conv1: 0.008
            layer4.2.conv1: 0.008
          real_face_dino_resnet50_conv_SSL_256:
            conv1: 0.0006
            layer1.2.conv1: 0.002
            layer2.3.conv1: 0.002
            layer3.5.conv1: 0.004
            layer4.2.conv1: 0.01
          real_face_dino_resnet50_conv_SSL_1024:
            conv1: 0.0002
            layer1.2.conv1: 0.0005
            layer2.3.conv1: 0.0005
            layer3.5.conv1: 0.001
            layer4.2.conv1: 0.002
          real_face_random_resnet50_conv_R_256:
            conv1: 0.02
            layer1.2.conv1: 0.04
            layer2.3.conv1: 0.1
            layer3.5.conv1: 0.1
            layer4.2.conv1: 0.3
          real_face_random_resnet50_conv_R_1024:
            conv1: 0.004
            layer1.2.conv1: 0.01
            layer2.3.conv1: 0.02
            layer3.5.conv1: 0.04
            layer4.2.conv1: 0.08
          real_face_resnet50_relu:
            conv1: 0.004
            layer1: 0.002
            layer2: 0.003
            layer3: 0.005
            layer4: 0.0
        loss_w_dict:
          conv1: 0.0
          layer1.2.conv1: 0.0
          layer2.3.conv1: 0.0
          layer3.5.conv1: 0.0
          layer4.2.conv1: 0.0
      vgg16_jit:
        name: vgg16_jit
        resize_input: true
        mse_weight: 1.0
      DeitSP16_loss_cfg:
        register_modules:
        - exp.ada_ultra.models.networks_ultra
        name: exp.ada_ultra.models.networks_ultra.DeitSmallPatch16Loss
        model_name: vit_deit_small_patch16_224
        model_name_list:
        - vit_deit_small_patch16_224
        - vit_deit_small_distilled_patch16_224
        - dino_deitsmall16
        resize_input: true
        use_stat_loss: false
        selected_loss_w_dict: 0
        layers:
        - patch_embed
        - blocks.0
        - blocks.3
        - blocks.7
        - blocks.11
        loss_w_dict_table:
          zero:
            patch_embed: 0.0
            blocks.0: 0.0
            blocks.3: 0.0
            blocks.7: 0.0
            blocks.11: 0.0
          real_face_deitSP16_SL:
            patch_embed: 0.02
            blocks.0: 0.02
            blocks.3: 0.02
            blocks.7: 0.005
            blocks.11: 0.005
          real_face_deitSP16_distil:
            patch_embed: 0.02
            blocks.0: 0.02
            blocks.3: 0.02
            blocks.7: 0.005
            blocks.11: 0.005
          real_face_deitSP16_dino_SSL:
            patch_embed: 0.1
            blocks.0: 0.1
            blocks.3: 0.1
            blocks.7: 0.1
            blocks.11: 0.08
        loss_w_dict:
          patch_embed: 0.0
          blocks.0: 0.0
          blocks.3: 0.0
          blocks.7: 0.0
          blocks.11: 0.0
      ssl_resnext101_loss_cfg:
        register_modules:
        - exp.ada_ultra.models.networks_ultra
        name: exp.ada_ultra.models.networks_ultra.SSLResNext101Loss
        use_stat_loss: false
        selected_loss_w_dict: 0
        layers:
        - conv1
        - layer1
        - layer2
        - layer3
        - layer4
        - global_pool
        loss_w_dict_table:
          zero:
            conv1: 0.0
            layer1: 0.0
            layer2: 0.0
            layer3: 0.0
            layer4: 0.0
            global_pool: 0.0
          real_face:
            conv1: 0.0
            layer1: 0.0
            layer2: 0.0
            layer3: 0.0
            layer4: 0.0
            global_pool: 0.0
        loss_w_dict:
          conv1: 0.0
          layer1: 0.0
          layer2: 0.0
          layer3: 0.0
          layer4: 0.0
          global_pool: 0.0
      hrnet_w64_loss_cfg:
        register_modules:
        - exp.ada_ultra.models.networks_ultra
        name: exp.ada_ultra.models.networks_ultra.HRNetW64Loss
        use_stat_loss: false
        selected_loss_w_dict: 0
        layers:
        - act1
        - act2
        - layer1
        - stage2
        - stage3
        - stage4
        - final_layer
        loss_w_dict_table:
          zero:
            act1: 0.0
            act2: 0.0
            layer1: 0.0
            stage2: 0.0
            stage3: 0.0
            stage4: 0.0
            final_layer: 0.0
          real_face:
            act1: 0.0
            act2: 0.0
            layer1: 0.0
            stage2: 0.0
            stage3: 0.0
            stage4: 0.0
            final_layer: 0.0
        loss_w_dict:
          act1: 0.0
          act2: 0.0
          layer1: 0.0
          stage2: 0.0
          stage3: 0.0
          stage4: 0.0
          final_layer: 0.0
      swin22k_loss_cfg:
        register_modules:
        - exp.ada_ultra.models.networks_ultra
        name: exp.ada_ultra.models.networks_ultra.Swin22kLoss
        use_stat_loss: false
        selected_loss_w_dict: 0
        layers:
        - patch_embed
        - layers.0
        - layers.1
        - layers.2
        - layers.3
        - avgpool
        loss_w_dict_table:
          zero:
            patch_embed: 0.0
            layers.0: 0.0
            layers.1: 0.0
            layers.2: 0.0
            layers.3: 0.0
            avgpool: 0.0
          real_face:
            patch_embed: 0.01
            layers.0: 0.005
            layers.1: 0.005
            layers.2: 0.003
            layers.3: 0.001
            avgpool: null
        loss_w_dict:
          patch_embed: 0.01
          layers.0: 0.005
          layers.1: 0.005
          layers.2: 0.003
          layers.3: 0.001
          avgpool: null
    vgg16_url: datasets/pretrained/metrics/vgg16.pt
    mse_weight: 50.0
    normalize_noise: true


project_image_web:
  port: 8561
  sidebar:
    sidebar_name: "project_image_web"
  model_cfg:
    register_modules:
      - exp2.hrinversion.models.hrinversion_st
    name: exp2.hrinversion.models.hrinversion_st.HRInversion_Web
  mode:
    - project_image_web
  project_image_web:
    image_list_files:
      aligned_faces:
        image_list_file: "datasets2/aligned_faces"
#      photo2cartoon:
#        image_list_file:
#        - "datasets2/photo2cartoon"
#      disney_cartoon:
#        image_list_file:
#        - "datasets2/disney_cartoon"
    network_pkl: *network_pkl
    default_network_pkl: FFHQ_r1024
    seed: 303
    fps: 20
    loss_cfg: *loss_cfg
    default_loss_cfg: vgg16_conv_r1024_loss_cfg
    num_steps: 1000
    optim_noise_bufs: false
    regularize_noise_weight: 0.0
    initial_learning_rate: 0.1
    proj_w_plus: true
    mse_weight: 50.0
    normalize_noise: true

project_images_ddp:
  del_outdir: false
  model_cfg:
    register_modules:
      - exp2.hrinversion.models.projector
    name: exp2.hrinversion.models.projector.StyleGAN2Projector
    network_pkl: *network_pkl
    default_network_pkl: FFHQ_r1024
    loss_cfg:
      name: exp2.hrinversion.models.vgg_per_loss.VGG16ConvLoss
      register_modules: ['exp2.hrinversion.models.vgg_per_loss']
      downsample_size: -1
      layers: ['features_2', 'features_7', 'features_14', 'features_21', 'features_28']
      loss_w_dict: {'features_2': 0.0002, 'features_7': 0.0001, 'features_14': 0.0001, 'features_21': 0.0002, 'features_28': 0.0005}
      model_name: vgg16_conv
  project_wplus_kwargs:
    optim_noise_bufs: true
    num_steps: 1000
    regularize_noise_weight: 0.
    mse_weight: 50
    seed: 303
  root_obs: *root_obs
  modelarts_download: *modelarts_download


project_photo2cartoon_web:
  port: 8561
  sidebar:
    sidebar_name: "project_image_web"
  model_cfg:
    register_modules:
      - exp2.hrinversion.models.hrinversion_st
    name: exp2.hrinversion.models.hrinversion_st.HRInversion_Web
  mode:
    - project_image_web
  project_image_web:
    image_list_files:
      photo2cartoon:
        image_list_file:
        - "datasets2/photo2cartoon"
#      disney_cartoon:
#        image_list_file:
#        - "datasets2/disney_cartoon"
    network_pkl: *network_pkl
    default_network_pkl: photo2cartoon_r1024
    seed: 303
    fps: 20
    loss_cfg: *loss_cfg
    default_loss_cfg: vgg16_conv_r1024_loss_cfg
    num_steps: 1000
    optim_noise_bufs: false
    regularize_noise_weight: 0.0
    initial_learning_rate: 0.1
    proj_w_plus: true
    mse_weight: 50.0
    normalize_noise: true

project_photo2cartoon_ddp:
  del_outdir: false
  model_cfg:
    register_modules:
      - exp2.hrinversion.models.projector
    name: exp2.hrinversion.models.projector.StyleGAN2Projector
    network_pkl: *network_pkl
    default_network_pkl: photo2cartoon_r1024
    loss_cfg:
      name: exp2.hrinversion.models.vgg_per_loss.VGG16ConvLoss
      register_modules: ['exp2.hrinversion.models.vgg_per_loss']
      downsample_size: -1
      layers: ['features_2', 'features_7', 'features_14', 'features_21', 'features_28']
      loss_w_dict: {'features_2': 0.0002, 'features_7': 0.0001, 'features_14': 0.0001, 'features_21': 0.0002, 'features_28': 0.0005}
      model_name: vgg16_conv
  project_wplus_kwargs:
    optim_noise_bufs: true
    num_steps: 1000
    regularize_noise_weight: 0.
    mse_weight: 50
    seed: 303
  root_obs: *root_obs
  modelarts_download: *modelarts_download


project_disney_cartoon_web:
  port: 8561
  sidebar:
    sidebar_name: "project_image_web"
  model_cfg:
    register_modules:
      - exp2.hrinversion.models.hrinversion_st
    name: exp2.hrinversion.models.hrinversion_st.HRInversion_Web
  mode:
    - project_image_web
  project_image_web:
    image_list_files:
      disney_cartoon:
        image_list_file:
        - "datasets2/disney_cartoon"
    network_pkl: *network_pkl
    default_network_pkl: disney_cartoon
    seed: 303
    fps: 20
    loss_cfg: *loss_cfg
    default_loss_cfg: vgg16_conv_r1024_loss_cfg
    num_steps: 1000
    optim_noise_bufs: false
    regularize_noise_weight: 0.0
    initial_learning_rate: 0.1
    proj_w_plus: true
    mse_weight: 50.0
    normalize_noise: true

#project_disney_cartoon_ddp
project_disney_cartoon_ddp:
  del_outdir: false
  model_cfg:
    register_modules:
      - exp2.hrinversion.models.projector
    name: exp2.hrinversion.models.projector.StyleGAN2Projector
    network_pkl: *network_pkl
    default_network_pkl: disney_cartoon
    loss_cfg:
      name: exp2.hrinversion.models.vgg_per_loss.VGG16ConvLoss
      register_modules: ['exp2.hrinversion.models.vgg_per_loss']
      downsample_size: -1
      layers: ['features_2', 'features_7', 'features_14', 'features_21', 'features_28']
      loss_w_dict: {'features_2': 0.0002, 'features_7': 0.0001, 'features_14': 0.0001, 'features_21': 0.0002, 'features_28': 0.0005}
      model_name: vgg16_conv
  project_wplus_kwargs:
    optim_noise_bufs: true
    num_steps: 1000
    regularize_noise_weight: 0.
    mse_weight: 50
    seed: 303
  root_obs: *root_obs
  modelarts_download: *modelarts_download


project_ukiyo_e_web:
  port: 8561
  sidebar:
    sidebar_name: "project_image_web"
  model_cfg:
    register_modules:
      - exp2.hrinversion.models.hrinversion_st
    name: exp2.hrinversion.models.hrinversion_st.HRInversion_Web
  mode:
    - project_image_web
  project_image_web:
    image_list_files:
      disney_cartoon:
        image_list_file:
        - "datasets2/ukiyo_e"
    network_pkl: *network_pkl
    default_network_pkl: ukiyo_e
    seed: 303
    fps: 20
    loss_cfg: *loss_cfg
    default_loss_cfg: vgg16_conv_r1024_loss_cfg
    num_steps: 1000
    optim_noise_bufs: false
    regularize_noise_weight: 0.0
    initial_learning_rate: 0.1
    proj_w_plus: true
    mse_weight: 50.0
    normalize_noise: true

project_ukiyo_e_ddp:
  del_outdir: false
  model_cfg:
    register_modules:
      - exp2.hrinversion.models.projector
    name: exp2.hrinversion.models.projector.StyleGAN2Projector
    network_pkl: *network_pkl
    default_network_pkl: ukiyo_e
    loss_cfg:
      name: exp2.hrinversion.models.vgg_per_loss.VGG16ConvLoss
      register_modules: ['exp2.hrinversion.models.vgg_per_loss']
      downsample_size: -1
      layers: ['features_2', 'features_7', 'features_14', 'features_21', 'features_28']
      loss_w_dict: {'features_2': 0.0002, 'features_7': 0.0001, 'features_14': 0.0001, 'features_21': 0.0002, 'features_28': 0.0005}
      model_name: vgg16_conv
  project_wplus_kwargs:
    optim_noise_bufs: true
    num_steps: 1000
    regularize_noise_weight: 0.
    mse_weight: 50
    seed: 303
  root_obs: *root_obs
  modelarts_download: *modelarts_download


project_Danbooru2019_web:
  port: 8561
  sidebar:
    sidebar_name: "project_image_web"
  model_cfg:
    register_modules:
      - exp2.hrinversion.models.hrinversion_st
    name: exp2.hrinversion.models.hrinversion_st.HRInversion_Web
  mode:
    - project_image_web
  project_image_web:
    image_list_files:
      disney_cartoon:
        image_list_file:
        - "datasets2/Danbooru2019"
    network_pkl: *network_pkl
    default_network_pkl: Danbooru2019
    seed: 303
    fps: 20
    loss_cfg: *loss_cfg
    default_loss_cfg: vgg16_conv_r1024_loss_cfg
    num_steps: 1000
    optim_noise_bufs: false
    regularize_noise_weight: 0.0
    initial_learning_rate: 0.1
    proj_w_plus: true
    mse_weight: 50.0
    normalize_noise: true

project_Danbooru2019_ddp:
  del_outdir: false
  model_cfg:
    register_modules:
      - exp2.hrinversion.models.projector
    name: exp2.hrinversion.models.projector.StyleGAN2Projector
    network_pkl: *network_pkl
    default_network_pkl: Danbooru2019
    loss_cfg:
      name: exp2.hrinversion.models.vgg_per_loss.VGG16ConvLoss
      register_modules: ['exp2.hrinversion.models.vgg_per_loss']
      downsample_size: -1
      layers: ['features_2', 'features_7', 'features_14', 'features_21', 'features_28']
      loss_w_dict: {'features_2': 0.0002, 'features_7': 0.0001, 'features_14': 0.0001, 'features_21': 0.0002, 'features_28': 0.0005}
      model_name: vgg16_conv
  project_wplus_kwargs:
    optim_noise_bufs: true
    num_steps: 1000
    regularize_noise_weight: 0.
    mse_weight: 50
    seed: 303
  root_obs: *root_obs
  modelarts_download: *modelarts_download


mix_photo2cartoon_web:
  port: 8561
  sidebar:
    sidebar_name: "mix_image_web"
  model_cfg:
    register_modules:
      - exp2.hrinversion.models.hrinversion_st
    name: exp2.hrinversion.models.hrinversion_st.HRInversion_Web
  mode:
    - mix_image_web
  mix_image_web:
    image_list_files:
      aligned_faces:
        image_list_file: "datasets2/aligned_faces"
        proj_dir: "datasets2/aligned_faces_proj"
      disney_cartoon:
        image_list_file: "datasets2/disney_cartoon"
        proj_dir: "datasets2/disney_cartoon_proj"
      Danbooru2019:
        image_list_file: "datasets2/Danbooru2019"
        proj_dir: "datasets2/Danbooru2019_proj"
      photo2cartoon:
        image_list_file: "datasets2/photo2cartoon"
        proj_dir: "datasets2/photo2cartoon_proj"
    default_content: aligned_faces
    default_style: photo2cartoon
    network_pkl: *network_pkl
    default_network_pkl_c: FFHQ_r1024
    default_network_pkl_s: photo2cartoon_r1024
    seed: 303
    fps: 4
    loss_cfg: *loss_cfg
    default_loss_cfg: vgg16_conv_r1024_loss_cfg
    num_steps: 1000
    optim_noise_bufs: false
    regularize_noise_weight: 0.0
    initial_learning_rate: 0.1
    proj_w_plus: true
    mse_weight: 50.0
    normalize_noise: true
    swapped_blocks: [1024, 512, 256, 128, 64, 32, 16, 8, 4]
    gamma_style: 1.

lso_photo2cartoon_web:
  port: 8561
  sidebar:
    sidebar_name: "lso_image_web"
  model_cfg:
    register_modules:
      - exp2.hrinversion.models.hrinversion_st
    name: exp2.hrinversion.models.hrinversion_st.HRInversion_Web
  mode:
    - lso_image_web
  lso_image_web:
    image_list_files:
      aligned_faces:
        image_list_file:
        - "datasets2/aligned_faces/image_list.txt"
      photo2cartoon:
        image_list_file:
        - "datasets2/photo2cartoon"
    default_content: aligned_faces
    default_style: photo2cartoon
    network_pkl: *network_pkl
    default_network_pkl_c: FFHQ_r1024
    default_network_pkl_s: photo2cartoon_r1024
    proj_c_dir: datasets2/aligned_faces_proj
    proj_s_dir: datasets2/photo2cartoon_proj
    seed: 303
    fps: 2
    loss_cfg:
      base: loss_cfg
      vgg16_conv_r1024_loss_cfg:
        layers:
        - features_14
        - features_21
        - features_28
    default_loss_cfg: vgg16_conv_r1024_loss_cfg
    num_steps: 200
    optim_noise_bufs: false
    regularize_noise_weight: 0.0
    initial_learning_rate: 0.1
    proj_w_plus: true
    mse_weight: 0.
    normalize_noise: true
    st_log_every: 2
    swapped_blocks: [1024, 512, 256, 128, 64, 32, 16, 8, 4]
    gamma_style: 0.35
    lso_optim_idx: [1,2,3,4]
    L2_reg: 0.01
    w_noise_std: 0.

# lso_photo2cartoon_web_v1
lso_photo2cartoon_web_v1:
  port: 8561
  sidebar:
    sidebar_name: "lso_image_web_v1"
  model_cfg:
    register_modules:
      - exp2.hrinversion.models.hrinversion_st
    name: exp2.hrinversion.models.hrinversion_st.HRInversion_Web
  mode:
    - lso_image_web_v1
  lso_image_web_v1:
    image_list_files:
      aligned_faces:
        image_list_file: "datasets2/aligned_faces"
        proj_dir: "datasets2/aligned_faces_proj"
      photo2cartoon:
        image_list_file: "datasets2/photo2cartoon"
        proj_dir: "datasets2/photo2cartoon_proj"
    default_content: aligned_faces
    default_style: photo2cartoon
    network_pkl: *network_pkl
    default_network_pkl_c: FFHQ_r1024
    default_network_pkl_s: photo2cartoon_r1024
    seed: 303
    fps: 10
    loss_cfg:
      base: loss_cfg
      vgg16_conv_r1024_loss_cfg:
        layers:
        - features_14
        - features_21
        - features_28
    default_loss_cfg: vgg16_conv_r1024_loss_cfg
    optim_noise_bufs: false
    regularize_noise_weight: 0.0
    proj_w_plus: true
    mse_weight: 0.
    normalize_noise: true
    num_steps: 50
    st_log_every: 1
    initial_learning_rate: 0.05
    swapped_blocks_high: [1024, 512, 256, 128]
    gamma_style_high: 0.8
    swapped_blocks_low: [64, 32, 16, 8, 4]
    gamma_style_low: 0.2
    lso_optim_idx: [0,1,2,3,4]
    L2_reg: 0.01
    w_noise_std: 0.

# lso_photo2cartoon_ddp_v1
lso_photo2cartoon_ddp_v1:
  del_outdir: false
  model_cfg:
    register_modules:
      - exp2.hrinversion.models.projector
    name: exp2.hrinversion.models.projector.MixImages
    network_pkl: *network_pkl
    network_pkl_c: FFHQ_r1024
    network_pkl_s: photo2cartoon_r1024
    loss_cfg:
      name: exp2.hrinversion.models.vgg_per_loss.VGG16ConvLoss
      register_modules: ['exp2.hrinversion.models.vgg_per_loss']
      downsample_size: -1
      layers: ['features_14', 'features_21', 'features_28']
      loss_w_dict: {'features_2': 0.0002, 'features_7': 0.0001, 'features_14': 0.0001, 'features_21': 0.0002, 'features_28': 0.0005}
      model_name: vgg16_conv
      use_stat_loss: False
  lso_optim_kwargs:
    num_steps: 50
    st_log_every: 1
    initial_learning_rate: 0.05
    swapped_blocks_high: [1024, 512, 256, 128]
    gamma_style_high: 0.8
    swapped_blocks_low: [64, 32, 16, 8, 4]
    gamma_style_low: 0.2
    lso_optim_idx: [0,1,2,3,4]
    L2_reg: 0.02
    w_noise_std: 0.
    optim_noise_bufs: false
    regularize_noise_weight: 0.
    hd_video: true
    st_web: false
  root_obs: *root_obs
  modelarts_download: *modelarts_download

# lso_photo2cartoon_ddp_v1_demo
lso_photo2cartoon_ddp_v1_demo:
  del_outdir: false
  model_cfg:
    register_modules:
      - exp2.hrinversion.models.projector
    name: exp2.hrinversion.models.projector.MixImages
    network_pkl: *network_pkl
    network_pkl_c: FFHQ_r1024
    network_pkl_s: photo2cartoon_r1024
    loss_cfg:
      name: exp2.hrinversion.models.vgg_per_loss.VGG16ConvLoss
      register_modules: ['exp2.hrinversion.models.vgg_per_loss']
      downsample_size: -1
      layers: ['features_14', 'features_21', 'features_28']
      loss_w_dict: {'features_2': 0.0002, 'features_7': 0.0001, 'features_14': 0.0001, 'features_21': 0.0002, 'features_28': 0.0005}
      model_name: vgg16_conv
      use_stat_loss: False
  lso_optim_kwargs:
    num_steps: 50
    st_log_every: 1
    mse_weight: 0.
    initial_learning_rate: 0.05
    swapped_blocks_high: [1024, 512, 256, 128, 64]
    gamma_style_high: 0.7
    swapped_blocks_low: [32, 16, 8, 4]
    gamma_style_low: 0.25
    lso_optim_idx: [0,1,2,3,4]
    L2_reg: 0.015
    w_noise_std: 10.
    optim_noise_bufs: false
    regularize_noise_weight: 0.
    hd_video: false
    st_web: false
  root_obs: *root_obs
  modelarts_download: *modelarts_download



mix_disney_cartoon_web:
  port: 8561
  sidebar:
    sidebar_name: "mix_image_web"
  model_cfg:
    register_modules:
      - exp2.hrinversion.models.hrinversion_st
    name: exp2.hrinversion.models.hrinversion_st.HRInversion_Web
  mode:
    - mix_image_web
  mix_image_web:
    image_list_files:
      aligned_faces:
        image_list_file:
        - "datasets2/aligned_faces/image_list.txt"
#      photo2cartoon:
#        image_list_file:
#        - "datasets2/photo2cartoon"
      disney_cartoon:
        image_list_file:
        - "datasets2/disney_cartoon"
    default_content: aligned_faces
    default_style: disney_cartoon
    network_pkl: *network_pkl
    default_network_pkl_c: FFHQ_r1024
    default_network_pkl_s: disney_cartoon
    proj_c_dir: datasets2/aligned_faces_proj
    proj_s_dir: datasets2/disney_cartoon_proj
    seed: 303
    fps: 2
    loss_cfg: *loss_cfg
    default_loss_cfg: vgg16_conv_r1024_loss_cfg
    num_steps: 1000
    optim_noise_bufs: false
    regularize_noise_weight: 0.0
    initial_learning_rate: 0.1
    proj_w_plus: true
    mse_weight: 50.0
    normalize_noise: true
    swapped_blocks: [1024, 512, 256, 128, 64, 32, 16, 8, 4]
    gamma_style: 1.

#lso_disney_cartoon_web
lso_disney_cartoon_web:
  port: 8561
  sidebar:
    sidebar_name: "lso_image_web"
  model_cfg:
    register_modules:
      - exp2.hrinversion.models.hrinversion_st
    name: exp2.hrinversion.models.hrinversion_st.HRInversion_Web
  mode:
    - lso_image_web
  lso_image_web:
    image_list_files:
      aligned_faces:
        image_list_file:
        - "datasets2/aligned_faces/"
      disney_cartoon:
        image_list_file:
        - "datasets2/disney_cartoon"
      generated_disney_cartoon:
        image_list_file:
        - "datasets2/generated_disney_cartoon"
    default_content: aligned_faces
    default_style: disney_cartoon
    network_pkl: *network_pkl
    default_network_pkl_c: FFHQ_r1024
    default_network_pkl_s: disney_cartoon
    proj_c_dir: datasets2/aligned_faces_proj
    proj_s_dir: datasets2/disney_cartoon_proj
    seed: 303
    fps: 10
    loss_cfg:
      base: loss_cfg
      vgg16_conv_r1024_loss_cfg:
        layers:
        - features_14
        - features_21
        - features_28
    default_loss_cfg: vgg16_conv_r1024_loss_cfg
    num_steps: 200
    optim_noise_bufs: false
    regularize_noise_weight: 0.0
    initial_learning_rate: 0.1
    proj_w_plus: true
    mse_weight: 0.
    normalize_noise: true
    st_log_every: 2
    swapped_blocks: [1024, 512, 256, 128, 64, 32, 16, 8, 4]
    gamma_style_block: 0.4
    lso_optim_idx: [1,2,3]
    L2_reg: 0.01
    w_noise_std: 0.

#lso_disney_cartoon_ddp
lso_disney_cartoon_ddp:
  del_outdir: false
  model_cfg:
    register_modules:
      - exp2.hrinversion.models.projector
    name: exp2.hrinversion.models.projector.MixImages
    network_pkl: *network_pkl
    network_pkl_c: FFHQ_r1024
    network_pkl_s: disney_cartoon
    loss_cfg:
      name: exp2.hrinversion.models.vgg_per_loss.VGG16ConvLoss
      register_modules: ['exp2.hrinversion.models.vgg_per_loss']
      downsample_size: -1
      layers: ['features_14', 'features_21', 'features_28']
      loss_w_dict: {'features_2': 0.0002, 'features_7': 0.0001, 'features_14': 0.0001, 'features_21': 0.0002, 'features_28': 0.0005}
      model_name: vgg16_conv
      use_stat_loss: False
  lso_optim_kwargs:
    swapped_blocks: [1024, 512, 256, 128, 64, 32, 16, 8, 4]
    gamma_style_block: 0.4
    gamma_style_w: 0.4
    lso_optim_idx: [1, 2, 3, 4]
    L2_reg: 0.01
    w_noise_std: 0.
    optim_noise_bufs: false
    num_steps: 200
    regularize_noise_weight: 0.
    hd_video: true
    st_log_every: 2
    st_web: false
  root_obs: *root_obs
  modelarts_download: *modelarts_download

# lso_disney_cartoon_web_v1
lso_disney_cartoon_web_v1:
  port: 8561
  sidebar:
    sidebar_name: "lso_image_web"
  model_cfg:
    register_modules:
      - exp2.hrinversion.models.hrinversion_st
    name: exp2.hrinversion.models.hrinversion_st.HRInversion_Web
  mode:
    - lso_image_web_v1
  lso_image_web_v1:
    image_list_files:
      aligned_faces:
        image_list_file: "datasets2/aligned_faces/"
        proj_dir: datasets2/aligned_faces_proj
      disney_cartoon:
        image_list_file: "datasets2/disney_cartoon"
        proj_dir: datasets2/disney_cartoon_proj
      generated_disney_cartoon:
        image_list_file: "datasets2/generated_disney_cartoon"
        proj_dir: datasets2/generated_disney_cartoon
    default_content: aligned_faces
    default_style: disney_cartoon
    network_pkl: *network_pkl
    default_network_pkl_c: FFHQ_r1024
    default_network_pkl_s: disney_cartoon
    seed: 303
    fps: 10
    loss_cfg:
      base: loss_cfg
      vgg16_conv_r1024_loss_cfg:
        layers:
        - features_14
        - features_21
        - features_28
    default_loss_cfg: vgg16_conv_r1024_loss_cfg
    optim_noise_bufs: false
    regularize_noise_weight: 0.0
    proj_w_plus: true
    mse_weight: 0.
    normalize_noise: true
    num_steps: 50
    st_log_every: 1
    initial_learning_rate: 0.05
    swapped_blocks_high: [1024, 512, 256, 128, 64]
    gamma_style_high: 0.7
    swapped_blocks_low: [32, 16, 8, 4]
    gamma_style_low: 0.25
    lso_optim_idx: [0,1,2,3,4]
    L2_reg: 0.02
    w_noise_std: 10.

# lso_disney_cartoon_ddp_v1
lso_disney_cartoon_ddp_v1:
  del_outdir: false
  model_cfg:
    register_modules:
      - exp2.hrinversion.models.projector
    name: exp2.hrinversion.models.projector.MixImages
    network_pkl: *network_pkl
    network_pkl_c: FFHQ_r1024
    network_pkl_s: disney_cartoon
    loss_cfg:
      name: exp2.hrinversion.models.vgg_per_loss.VGG16ConvLoss
      register_modules: ['exp2.hrinversion.models.vgg_per_loss']
      downsample_size: -1
      layers: ['features_14', 'features_21', 'features_28']
      loss_w_dict: {'features_2': 0.0002, 'features_7': 0.0001, 'features_14': 0.0001, 'features_21': 0.0002, 'features_28': 0.0005}
      model_name: vgg16_conv
      use_stat_loss: False
  lso_optim_kwargs:
    num_steps: 50
    st_log_every: 1
    initial_learning_rate: 0.05
    swapped_blocks_high: [1024, 512, 256, 128, 64]
    gamma_style_high: 0.7
    swapped_blocks_low: [32, 16, 8, 4]
    gamma_style_low: 0.25
    lso_optim_idx: [0,1,2,3,4]
    L2_reg: 0.02
    w_noise_std: 0.
    optim_noise_bufs: false
    regularize_noise_weight: 0.
    hd_video: true
    st_web: false
  root_obs: *root_obs
  modelarts_download: *modelarts_download

# lso_disney_cartoon_ddp_v1_demo
lso_disney_cartoon_ddp_v1_demo:
  base: lso_disney_cartoon_ddp_v1
  lso_optim_kwargs:
    num_steps: 50
    st_log_every: 1
    mse_weight: 0.
    initial_learning_rate: 0.05
    swapped_blocks_high: [1024, 512, 256, 128, 64]
    gamma_style_high: 0.7
    swapped_blocks_low: [32, 16, 8, 4]
    gamma_style_low: 0.25
    lso_optim_idx: [0,1,2,3,4]
    L2_reg: 0.015
    w_noise_std: 10.
    optim_noise_bufs: false
    regularize_noise_weight: 0.
    hd_video: false
    st_web: false

lso_disney_cartoon_ddp_v1_demo_glasses:
  base: lso_disney_cartoon_ddp_v1
  lso_optim_kwargs:
    num_steps: 50
    st_log_every: 1
    mse_weight: 0.
    initial_learning_rate: 0.05
    swapped_blocks_high: [1024, 512, 256, 128, 64]
    gamma_style_high: 0.7
    swapped_blocks_low: [32, 16, 8, 4]
    gamma_style_low: 0.25
    lso_optim_idx: [0,1,2,3,4,5,6]
    L2_reg: 0.01
    w_noise_std: 10.
    optim_noise_bufs: false
    regularize_noise_weight: 0.
    hd_video: false
    st_web: false


#layer_swapping_disney_cartoon_web
layer_swapping_disney_cartoon_web:
  port: 8561
  sidebar:
    sidebar_name: "layer_swapping_image_web"
  model_cfg:
    register_modules:
      - exp2.hrinversion.models.hrinversion_st
    name: exp2.hrinversion.models.hrinversion_st.HRInversion_Web
  mode:
    - layer_swapping_image_web
  layer_swapping_image_web:
    image_list_files:
      aligned_faces:
        image_list_file:
        - "datasets2/aligned_faces/image_list.txt"
    default_content: aligned_faces
    network_pkl: *network_pkl
    default_network_pkl_c: FFHQ_r1024
    default_network_pkl_s: disney_cartoon
    proj_c_dir: datasets2/aligned_faces_proj
    seed: 303
    swapped_blocks: [1024, 512, 256, 128, 64, 32]
    gamma_style_block: 0.7

#layer_swapping_disney_cartoon_ddp
layer_swapping_disney_cartoon_ddp:
  model_cfg:
    register_modules:
      - exp2.hrinversion.models.projector
    name: exp2.hrinversion.models.projector.MixImages
    network_pkl: *network_pkl
    network_pkl_c: FFHQ_r1024
    network_pkl_s: disney_cartoon
    loss_cfg: null
  layer_swapping_kwargs:
    swapped_blocks: [1024, 512, 256, 128, 64, 32]
    gamma_style_block: 0.7
    st_web: false
  root_obs: *root_obs
  modelarts_download: *modelarts_download

#_generate_images_disney_cartoon_ddp
_generate_images_disney_cartoon_ddp:
  seed: 0
  network_pkl: *network_pkl
  default_network_pkl: disney_cartoon
  num_images: 1000
  batch_size: 4
  truncation_psi: 1.
  G_cfg:
    base: G_cfg_r1024
    register_modules:
      - "exp2.hrinversion.models.style_inr_gan"
    name: "exp2.hrinversion.models.style_inr_gan.GeneratorUltraZPC_FreezeMapping"
    inr_net_kwargs:
      disable: true
  root_obs: *root_obs
  modelarts_download: *modelarts_download

#lso_layer_swapping_disney_cartoon_web
lso_layer_swapping_disney_cartoon_web:
  port: 8561
  sidebar:
    sidebar_name: "lso_image_web"
  model_cfg:
    register_modules:
      - exp2.hrinversion.models.hrinversion_st
    name: exp2.hrinversion.models.hrinversion_st.HRInversion_Web
  mode:
    - lso_image_web
  lso_image_web:
    image_list_files:
      aligned_faces:
        image_list_file:
        - "datasets2/aligned_faces"
      disney_cartoon:
        image_list_file:
        - "datasets2/disney_cartoon"
      generated_disney_cartoon:
        image_list_file:
        - "datasets2/generated_disney_cartoon"
    default_content: aligned_faces
    default_style: disney_cartoon
    network_pkl: *network_pkl
    default_network_pkl_c: FFHQ_r1024
    default_network_pkl_s: disney_cartoon
    proj_c_dir: datasets2/aligned_faces_proj
    proj_s_dir: datasets2/disney_cartoon_proj
    seed: 303
    fps: 10
    loss_cfg:
      base: loss_cfg
      vgg16_conv_r1024_loss_cfg:
        layers:
        - features_14
        - features_21
        - features_28
    default_loss_cfg: vgg16_conv_r1024_loss_cfg
    num_steps: 200
    optim_noise_bufs: false
    regularize_noise_weight: 0.0
    initial_learning_rate: 0.1
    proj_w_plus: true
    mse_weight: 0.
    normalize_noise: true
    st_log_every: 2
    swapped_blocks: [1024, 512, 256, 128, 64, 32]
    gamma_style_block: 0.7
    lso_optim_idx: [1,2,3,4]
    L2_reg: 0.01
    w_noise_std: 0.

#lso_layer_swapping_disney_cartoon_ddp
lso_layer_swapping_disney_cartoon_ddp:
  del_outdir: false
  model_cfg:
    register_modules:
      - exp2.hrinversion.models.projector
    name: exp2.hrinversion.models.projector.MixImages
    network_pkl: *network_pkl
    network_pkl_c: FFHQ_r1024
    network_pkl_s: disney_cartoon
    loss_cfg:
      name: exp2.hrinversion.models.vgg_per_loss.VGG16ConvLoss
      register_modules: ['exp2.hrinversion.models.vgg_per_loss']
      downsample_size: -1
      layers: ['features_14', 'features_21', 'features_28']
      loss_w_dict: {'features_2': 0.0002, 'features_7': 0.0001, 'features_14': 0.0001, 'features_21': 0.0002, 'features_28': 0.0005}
      model_name: vgg16_conv
      use_stat_loss: False
  lso_optim_kwargs:
    swapped_blocks: [1024, 512, 256, 128, 64, 32]
    gamma_style_block: 0.7
    gamma_style_w: 0.7
    lso_optim_idx: [0, 1, 2, 3]
    L2_reg: 0.015
    w_noise_std: 0.
    optim_noise_bufs: false
    num_steps: 1
    regularize_noise_weight: 0.
    hd_video: true
    st_log_every: 2
    st_web: false
  root_obs: *root_obs
  modelarts_download: *modelarts_download


mix_ukiyo_e_web:
  port: 8561
  sidebar:
    sidebar_name: "mix_image_web"
  model_cfg:
    register_modules:
      - exp2.hrinversion.models.hrinversion_st
    name: exp2.hrinversion.models.hrinversion_st.HRInversion_Web
  mode:
    - mix_image_web
  mix_image_web:
    image_list_files:
      aligned_faces:
        image_list_file:
        - "datasets2/aligned_faces/image_list.txt"
      ukiyo_e:
        image_list_file:
        - "datasets2/ukiyo_e"
    default_content: aligned_faces
    default_style: ukiyo_e
    network_pkl: *network_pkl
    default_network_pkl_c: FFHQ_r1024
    default_network_pkl_s: ukiyo_e
    proj_c_dir: datasets2/aligned_faces_proj
    proj_s_dir: datasets2/ukiyo_e_proj
    seed: 303
    fps: 2
    loss_cfg: *loss_cfg
    default_loss_cfg: vgg16_conv_r1024_loss_cfg
    num_steps: 1000
    optim_noise_bufs: false
    regularize_noise_weight: 0.0
    initial_learning_rate: 0.1
    proj_w_plus: true
    mse_weight: 50.0
    normalize_noise: true
    swapped_blocks: [1024, 512, 256, 128, 64, 32, 16, 8, 4]
    gamma_style: 1.

lso_ukiyo_e_web:
  port: 8561
  sidebar:
    sidebar_name: "lso_image_web"
  model_cfg:
    register_modules:
      - exp2.hrinversion.models.hrinversion_st
    name: exp2.hrinversion.models.hrinversion_st.HRInversion_Web
  mode:
    - lso_image_web
  lso_image_web:
    image_list_files:
      aligned_faces:
        image_list_file:
        - "datasets2/aligned_faces/image_list.txt"
      ukiyo_e:
        image_list_file:
        - "datasets2/ukiyo_e"
    default_content: aligned_faces
    default_style: ukiyo_e
    network_pkl: *network_pkl
    default_network_pkl_c: FFHQ_r1024
    default_network_pkl_s: ukiyo_e
    proj_c_dir: datasets2/aligned_faces_proj
    proj_s_dir: datasets2/ukiyo_e_proj
    seed: 303
    fps: 2
    loss_cfg:
      base: loss_cfg
      vgg16_conv_r1024_loss_cfg:
        layers:
        - features_14
        - features_21
        - features_28
    default_loss_cfg: vgg16_conv_r1024_loss_cfg
    num_steps: 200
    optim_noise_bufs: false
    regularize_noise_weight: 0.0
    initial_learning_rate: 0.1
    proj_w_plus: true
    mse_weight: 0.
    normalize_noise: true
    st_log_every: 2
    swapped_blocks: [1024, 512, 256, 128, 64, 32, 16, 8, 4]
    gamma_style_block: 0.35
    lso_optim_idx: [1,2,3,4]
    L2_reg: 0.01
    w_noise_std: 0.1


# lso_ukiyo_e_ddp_v1_demo
lso_ukiyo_e_ddp_v1_demo:
  del_outdir: false
  model_cfg:
    register_modules:
      - exp2.hrinversion.models.projector
    name: exp2.hrinversion.models.projector.MixImages
    network_pkl: *network_pkl
    network_pkl_c: FFHQ_r1024
    network_pkl_s: ukiyo_e
    loss_cfg:
      name: exp2.hrinversion.models.vgg_per_loss.VGG16ConvLoss
      register_modules: ['exp2.hrinversion.models.vgg_per_loss']
      downsample_size: -1
      layers: ['features_14', 'features_21', 'features_28']
      loss_w_dict: {'features_2': 0.0002, 'features_7': 0.0001, 'features_14': 0.0001, 'features_21': 0.0002, 'features_28': 0.0005}
      model_name: vgg16_conv
      use_stat_loss: False
  lso_optim_kwargs:
    num_steps: 50
    st_log_every: 1
    mse_weight: 0.
    initial_learning_rate: 0.05
    swapped_blocks_high: [1024, 512, 256, 128, 64]
    gamma_style_high: 0.7
    swapped_blocks_low: [32, 16, 8, 4]
    gamma_style_low: 0.25
    lso_optim_idx: [0,1,2,3,4]
    L2_reg: 0.015
    w_noise_std: 10.
    optim_noise_bufs: false
    regularize_noise_weight: 0.
    hd_video: false
    st_web: false
  root_obs: *root_obs
  modelarts_download: *modelarts_download


# lso_Danbooru2019_web
lso_Danbooru2019_web:
  port: 8561
  sidebar:
    sidebar_name: "lso_image_web"
  model_cfg:
    register_modules:
      - exp2.hrinversion.models.hrinversion_st
    name: exp2.hrinversion.models.hrinversion_st.HRInversion_Web
  mode:
    - lso_image_web
  lso_image_web:
    image_list_files:
      aligned_faces:
        image_list_file: "datasets2/aligned_faces"
        proj_dir: "datasets2/aligned_faces_proj"
      Danbooru2019:
        image_list_file: "datasets2/Danbooru2019"
        proj_dir: datasets2/Danbooru2019_proj
    default_content: aligned_faces
    default_style: Danbooru2019
    network_pkl: *network_pkl
    default_network_pkl_c: FFHQ_r1024
    default_network_pkl_s: Danbooru2019
    seed: 303
    fps: 10
    loss_cfg:
      base: loss_cfg
      vgg16_conv_r1024_loss_cfg:
        layers:
        - features_14
        - features_21
        - features_28
    default_loss_cfg: vgg16_conv_r1024_loss_cfg
    num_steps: 200
    optim_noise_bufs: false
    regularize_noise_weight: 0.0
    initial_learning_rate: 0.1
    proj_w_plus: true
    mse_weight: 0.
    normalize_noise: true
    st_log_every: 2
    swapped_blocks: [1024, 512, 256, 128, 64, 32, 16, 8, 4]
    gamma_style_block: 0.35
    lso_optim_idx: [1,2,3,4]
    L2_reg: 0.01
    w_noise_std: 0.


# lso_Danbooru2019_ddp
lso_Danbooru2019_ddp:
  del_outdir: false
  model_cfg:
    register_modules:
      - exp2.hrinversion.models.projector
    name: exp2.hrinversion.models.projector.MixImages
    network_pkl: *network_pkl
    network_pkl_c: FFHQ_r1024
    network_pkl_s: Danbooru2019
    loss_cfg:
      name: exp2.hrinversion.models.vgg_per_loss.VGG16ConvLoss
      register_modules: ['exp2.hrinversion.models.vgg_per_loss']
      downsample_size: -1
      layers: ['features_14', 'features_21', 'features_28']
      loss_w_dict: {'features_2': 0.0002, 'features_7': 0.0001, 'features_14': 0.0001, 'features_21': 0.0002, 'features_28': 0.0005}
      model_name: vgg16_conv
      use_stat_loss: False
  lso_optim_kwargs:
    swapped_blocks: [1024, 512, 256, 128, 64, 32, 16, 8, 4]
    gamma_style_block: 0.35
    gamma_style_w: 0.35
    lso_optim_idx: [1, 2, 3, 4]
    L2_reg: 0.01
    w_noise_std: 0.
    optim_noise_bufs: false
    num_steps: 200
    regularize_noise_weight: 0.
    hd_video: true
    st_log_every: 2
    st_web: false
  root_obs: *root_obs
  modelarts_download: *modelarts_download


# lso_Danbooru2019_web_v1
lso_Danbooru2019_web_v1:
  port: 8561
  sidebar:
    sidebar_name: "lso_image_web"
  model_cfg:
    register_modules:
      - exp2.hrinversion.models.hrinversion_st
    name: exp2.hrinversion.models.hrinversion_st.HRInversion_Web
  mode:
    - lso_image_web_v1
  lso_image_web_v1:
    image_list_files:
      aligned_faces:
        image_list_file: "datasets2/aligned_faces"
        proj_dir: "datasets2/aligned_faces_proj"
      Danbooru2019:
        image_list_file: "datasets2/Danbooru2019"
        proj_dir: datasets2/Danbooru2019_proj
    default_content: aligned_faces
    default_style: Danbooru2019
    network_pkl: *network_pkl
    default_network_pkl_c: FFHQ_r1024
    default_network_pkl_s: Danbooru2019
    seed: 303
    fps: 10
    loss_cfg:
      base: loss_cfg
      vgg16_conv_r1024_loss_cfg:
        layers:
        - features_14
        - features_21
        - features_28
    default_loss_cfg: vgg16_conv_r1024_loss_cfg
    num_steps: 200
    optim_noise_bufs: false
    regularize_noise_weight: 0.0
    initial_learning_rate: 0.1
    proj_w_plus: true
    mse_weight: 0.
    normalize_noise: true
    st_log_every: 2
    swapped_blocks_high: [1024, 512, 256, 128, 64, 32]
    gamma_style_high: 0.4
    swapped_blocks_low: [16, 8, 4]
    gamma_style_low: 0.2
    lso_optim_idx: [1,2,3,4]
    L2_reg: 0.015
    w_noise_std: 0.

# lso_Danbooru2019_ddp_v1
lso_Danbooru2019_ddp_v1:
  del_outdir: false
  model_cfg:
    register_modules:
      - exp2.hrinversion.models.projector
    name: exp2.hrinversion.models.projector.MixImages
    network_pkl: *network_pkl
    network_pkl_c: FFHQ_r1024
    network_pkl_s: Danbooru2019
    loss_cfg:
      name: exp2.hrinversion.models.vgg_per_loss.VGG16ConvLoss
      register_modules: ['exp2.hrinversion.models.vgg_per_loss']
      downsample_size: -1
      layers: ['features_14', 'features_21', 'features_28']
      loss_w_dict: {'features_2': 0.0002, 'features_7': 0.0001, 'features_14': 0.0001, 'features_21': 0.0002, 'features_28': 0.0005}
      model_name: vgg16_conv
      use_stat_loss: False
  lso_optim_kwargs:
    swapped_blocks_high: [1024, 512, 256, 128, 64]
    gamma_style_high: 0.6
    swapped_blocks_low: [32, 16, 8, 4]
    gamma_style_low: 0.2
    lso_optim_idx: [1, 2, 3, 4]
    L2_reg: 0.015
    w_noise_std: 0.
    optim_noise_bufs: false
    num_steps: 200
    regularize_noise_weight: 0.
    hd_video: true
    st_log_every: 2
    st_web: false
  root_obs: *root_obs
  modelarts_download: *modelarts_download
